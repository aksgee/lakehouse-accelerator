resources:
  jobs:
    bootstrap_uc:
      name: bootstrap_uc

      tasks:
        - task_key: create_uc_structure
          spark_python_task:
            python_file: ../../src/lakehouse_accelerator/bootstrap_uc.py
            parameters:
              - "structure"
              - ${var.uc_structure_path}
          environment_key: default

        - task_key: apply_grants
          depends_on:
            - task_key: create_uc_structure
          spark_python_task:
            python_file: ../../src/lakehouse_accelerator/apply_grants.py
            parameters:
              - "structure"
              - ${var.uc_structure_path}
              - "grants"
              - ${var.grants_path}
          environment_key: default

      environments:
        - environment_key: default
          spec:
            client: "1"
            dependencies:
              - databricks-sdk
              - pyyaml
